{% extends "layout.html" %}
{% block title %}{{ title }}{% endblock %}

{% block js_extra %}
<script type="text/javascript" src="/static/js/markdown/Markdown.Converter.js"></script>
<script type="text/javascript" src="/static/js/markdown/Markdown.Sanitizer.js"></script>
<script type="text/javascript" src="/static/js/markdown/Markdown.Editor.js"></script>
<script type="text/javascript">
  $(function(){
    var converter1 = Markdown.getSanitizingConverter();
    var editor1 = new Markdown.Editor(converter1);
    editor1.run();
  });
</script>
{% endblock js_extra %}

{% block main %}
<form method="POST" id="" class="forms" action="{{ action }}">
  {% from "macros/form.html" import render_field %}
  {{ form.hidden_tag() }}
  <div class="row">
    <div class="threequarter" >
      <fieldset>
        <legend>{{ title }}</legend>
        <ul>
          {{ render_field(form.title, style="width: 61.8%;") }}
          <div id="wmd-panel">
            <div id="wmd-button-bar"></div>
            {{ render_field(form.md_content, class="wmd-input", id="wmd-input", style="" ) }}
          </div>
          <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
        </ul>
      </fieldset>
    </div>
    
    <div class="quarter">
      <fieldset>
        <legend>Options</legend>
        <ul>
          {{ render_field(form.category) }}
          {{ render_field(form.status) }}
          {{ render_field(form.visibility) }}
          <hr />
          <li>
            <input type="submit" class="btn push-right" value="Submit" />
          </li>
        </ul>
      </fieldset>
    </div>
    
  </div>
</form>
{% endblock %}
